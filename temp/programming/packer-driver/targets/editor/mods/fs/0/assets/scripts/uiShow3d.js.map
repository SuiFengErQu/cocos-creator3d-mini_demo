{"version":3,"sources":["file:///D:/CocosProject/testDemo/cocos3d20211013/20211014/demolist2/assets/scripts/uiShow3d.ts"],"names":["_decorator","Component","Node","quat","math","RenderTexture","Sprite","Camera","ccclass","property","UiShow3d","start","touchScreenNode","on","EventType","TOUCH_START","touchStart","bind","TOUCH_MOVE","touchMove","renderTex","render","camera","getComponent","targetTexture","content","spriteFrame","texture","e","touchStartPosX","getLocationX","ang","rotation1","rotation2","ro","Quat","rotateY","cube","rotate"],"mappings":";;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAkBC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,a,OAAAA,a;AAAeC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,M,OAAAA,M;;;;;;;OAC/E;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBT,U;AAE9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;0BAGaU,Q,WADZF,OAAO,CAAC,UAAD,C,UAQHC,QAAQ,CAACJ,aAAD,C,UAGRI,QAAQ,CAACP,IAAD,C,UAGRO,QAAQ,CAACP,IAAD,C,UAGRO,QAAQ,CAACH,MAAD,C,oCAjBb,MACaI,QADb,SAC8BT,SAD9B,CACwC;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,kDAmBnB,CAnBmB;AAAA;;AAqBpCU,QAAAA,KAAK,GAAI;AACL,eAAKC,eAAL,CAAqBC,EAArB,CAAwBX,IAAI,CAACY,SAAL,CAAeC,WAAvC,EAAmD,KAAKC,UAAL,CAAgBC,IAAhB,CAAqB,IAArB,CAAnD,EAA8E,IAA9E;AACA,eAAKL,eAAL,CAAqBC,EAArB,CAAwBX,IAAI,CAACY,SAAL,CAAeI,UAAvC,EAAkD,KAAKC,SAAL,CAAeF,IAAf,CAAoB,IAApB,CAAlD,EAA4E,IAA5E,EAFK,CAGL;;AACA,gBAAMG,SAAS,GAAG,KAAKC,MAAvB;AAEA,gBAAMC,MAAM,GAAG,KAAKC,YAAL,CAAkBhB,MAAlB,CAAf;AACAe,UAAAA,MAAM,CAACE,aAAP,GAAuBJ,SAAvB;AAEA,eAAKK,OAAL,CAAaC,WAAb,CAAyBC,OAAzB,GAAmCP,SAAnC;AACH,SA/BmC,CAgCnC;;;AACAJ,QAAAA,UAAU,CAACY,CAAD,EACV;AACI,eAAKC,cAAL,GAAsBD,CAAC,CAACE,YAAF,EAAtB;AACH;;AACDX,QAAAA,SAAS,CAACS,CAAD,EACT;AACI,cAAIG,GAAG,GAAIH,CAAC,CAACE,YAAF,KAAiB,KAAKD,cAAjC;AAEA,gBAAMG,SAAS,GAAG7B,IAAI,EAAtB;AACA,gBAAM8B,SAAS,GAAG9B,IAAI,EAAtB;AACA,cAAI+B,EAAE,GAAG9B,IAAI,CAAC+B,IAAL,CAAUC,OAAV,CAAkBJ,SAAlB,EAA4BC,SAA5B,EAAsCF,GAAG,GAAC,IAA1C,CAAT;AACA,eAAKM,IAAL,CAAUC,MAAV,CAAiBJ,EAAjB;AACA,eAAKL,cAAL,GAAsBD,CAAC,CAACE,YAAF,EAAtB;AACH,SA9CkC,CAgDpC;AACA;AACA;;;AAlDoC,O;;;;;iBAQL,I;;;;;;;iBAGnB,I;;;;;;;iBAGS,I;;;;;;;iBAGN,I;;;AAoCnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["\nimport { _decorator, Component, Node, EventTouch, quat, math, RenderTexture, Sprite, Camera } from 'cc';\nconst { ccclass, property } = _decorator;\n\n/**\n * Predefined variables\n * Name = UiShow3d\n * DateTime = Thu Oct 28 2021 18:28:29 GMT+0800 (中国标准时间)\n * Author = fywxk\n * FileBasename = uiShow3d.ts\n * FileBasenameNoExtension = uiShow3d\n * URL = db://assets/scripts/uiShow3d.ts\n * ManualUrl = https://docs.cocos.com/creator/3.3/manual/zh/\n *\n */\n \n@ccclass('UiShow3d')\nexport class UiShow3d extends Component {\n    // [1]\n    // dummy = '';\n\n    // [2]\n    // @property\n    // serializableDummy = 0;\n    @property(RenderTexture)\n    public render: RenderTexture = null!;\n\n    @property(Node)\n    cube:Node = null;\n\n    @property(Node)\n    touchScreenNode:Node=null;\n\n    @property(Sprite)\n    content:Sprite=null;\n\n    touchStartPosX = 0;\n\n    start () {\n        this.touchScreenNode.on(Node.EventType.TOUCH_START,this.touchStart.bind(this),this)\n        this.touchScreenNode.on(Node.EventType.TOUCH_MOVE,this.touchMove.bind(this),this)\n        // 设置render\n        const renderTex = this.render;\n\n        const camera = this.getComponent(Camera)!;\n        camera.targetTexture = renderTex;\n\n        this.content.spriteFrame.texture = renderTex;\n    }\n     // 控制旋转\n     touchStart(e:EventTouch)\n     {\n         this.touchStartPosX = e.getLocationX();\n     }\n     touchMove(e:EventTouch)\n     { \n         let ang = (e.getLocationX()-this.touchStartPosX)\n        \n         const rotation1 = quat();\n         const rotation2 = quat();\n         let ro = math.Quat.rotateY(rotation1,rotation2,ang*0.01);\n         this.cube.rotate(ro);\n         this.touchStartPosX = e.getLocationX();\n     }\n\n    // update (deltaTime: number) {\n    //     // [4]\n    // }\n}\n\n/**\n * [1] Class member could be defined like this.\n * [2] Use `property` decorator if your want the member to be serializable.\n * [3] Your initialization goes here.\n * [4] Your update function goes here.\n *\n * Learn more about scripting: https://docs.cocos.com/creator/3.3/manual/zh/scripting/\n * Learn more about CCClass: https://docs.cocos.com/creator/3.3/manual/zh/scripting/ccclass.html\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.3/manual/zh/scripting/life-cycle-callbacks.html\n */\n"]}