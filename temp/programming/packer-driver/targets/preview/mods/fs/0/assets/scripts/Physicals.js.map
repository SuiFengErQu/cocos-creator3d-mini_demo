{"version":3,"sources":["file:///D:/CocosProject/testDemo/cocos3d20211013/20211014/demolist2/assets/scripts/physicals.ts"],"names":["_decorator","Component","Node","RigidBody","Vec3","CapsuleCollider","ConstantForce","ccclass","property","Physicals","type","start","rig","role","getComponent","translate","applyForce","applyTorque","applyImpulse","setLinearVelocity","coll","on","e","useCCD","con","constantNode","force","localTorque"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAA2BC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,e,OAAAA,e;AAAiBC,MAAAA,a,OAAAA,a;;;;;;;AACrFC,MAAAA,O,GAAsBP,U,CAAtBO,O;AAASC,MAAAA,Q,GAAaR,U,CAAbQ,Q;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;2BAGaC,S,WADZF,OAAO,CAAC,WAAD,C,UAQHC,QAAQ,CAAC;AAACE,QAAAA,IAAI,EAACR;AAAN,OAAD,C,UAGRM,QAAQ,CAAC;AAACE,QAAAA,IAAI,EAACR;AAAN,OAAD,C;;;;;;;;;;;;;;;;;;;;;AACe;eAExBS,K,GAAA,iBAAS;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAIC,GAAa,GAAG,KAAKC,IAAL,CAAUC,YAAV,CAAuBX,SAAvB,CAApB,CATK,CAUL;;AACA,eAAKU,IAAL,CAAUE,SAAV,CAAoB,IAAIX,IAAJ,CAAS,CAAT,EAAW,EAAX,EAAc,CAAd,CAApB,EAXK,CAYL;;AACAQ,UAAAA,GAAG,CAACI,UAAJ,CAAe,IAAIZ,IAAJ,CAAS,CAAT,EAAW,EAAX,EAAc,CAAd,CAAf,EAbK,CAa4B;;AACjCQ,UAAAA,GAAG,CAACK,WAAJ,CAAgB,IAAIb,IAAJ,CAAS,CAAT,EAAW,EAAX,EAAc,CAAd,CAAhB,EAdK,CAc6B;;AAClCQ,UAAAA,GAAG,CAACM,YAAJ,CAAiB,IAAId,IAAJ,CAAS,CAAT,EAAW,EAAX,EAAc,CAAd,CAAjB,EAfK,CAe8B;;AACnCQ,UAAAA,GAAG,CAACO,iBAAJ,CAAsB,IAAIf,IAAJ,CAAS,CAAT,EAAW,EAAX,EAAc,CAAd,CAAtB,EAhBK,CAgBkC;AAEvC;;AACA,cAAIgB,IAAI,GAAG,KAAKP,IAAL,CAAUC,YAAV,CAAuBT,eAAvB,CAAX;AACAe,UAAAA,IAAI,CAACC,EAAL,CAAQ,iBAAR,EAA0B,UAACC,CAAD,EAAK,CAAE,CAAjC,EAAkC,IAAlC;AACAF,UAAAA,IAAI,CAACC,EAAL,CAAQ,eAAR,EAAyB,UAACC,CAAD,EAAK,CAAE,CAAhC,EAAkC,IAAlC,EArBK,CAuBL;;AACAV,UAAAA,GAAG,CAACW,MAAJ,GAAa,IAAb,CAxBK,CA2BL;;AACA,cAAIC,GAAiB,GAAG,KAAKC,YAAL,CAAkBX,YAAlB,CAA+BR,aAA/B,CAAxB;AACAkB,UAAAA,GAAG,CAACE,KAAJ,GAAY,IAAItB,IAAJ,CAAS,CAAT,EAAW,EAAX,EAAc,CAAd,CAAZ;AACAoB,UAAAA,GAAG,CAACG,WAAJ,GAAkB,IAAIvB,IAAJ,CAAS,CAAT,EAAW,EAAX,EAAc,CAAd,CAAlB;AACH,S,CAED;AACA;AACA;;;;QAhD2BH,S;;;;;iBAQjB,I;;;;;;;iBAGQ,I;;;AAwCtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["\nimport { _decorator, Component, Node, PhysicsSystem, find, RigidBody, Vec3, CapsuleCollider, ConstantForce } from 'cc';\nconst { ccclass, property } = _decorator;\n\n/**\n * Predefined variables\n * Name = Physicals\n * DateTime = Thu Oct 28 2021 16:39:03 GMT+0800 (中国标准时间)\n * Author = fywxk\n * FileBasename = Physicals.ts\n * FileBasenameNoExtension = Physicals\n * URL = db://assets/scripts/Physicals.ts\n * ManualUrl = https://docs.cocos.com/creator/3.3/manual/zh/\n *\n */\n \n@ccclass('Physicals')\nexport class Physicals extends Component {\n    // [1]\n    // dummy = '';\n\n    // [2]\n    // @property\n    // serializableDummy = 0;\n    @property({type:Node})\n    role:Node=null;\n\n    @property({type:Node})\n    constantNode:Node=null; // 恒力\n\n    start () {\n        // PhysicsSystem.instance.enable\n        // PhysicsSystem.instance.gravity\n        // PhysicsSystem.instance.maxSubSteps\n        // PhysicsSystem.instance.minVolumeSize\n        // PhysicsSystem.instance.allowSleep\n        // PhysicsSystem.instance.fixedTimeStep\n        // PhysicsSystem.instance.sleepThreshold\n        // PhysicsSystem.instance.autoSimulation\n        let rig:RigidBody = this.role.getComponent(RigidBody);\n        // 运动学和静态类型刚体 让物体移动\n        this.role.translate(new Vec3(0,10,0))\n        // 动力学刚体 让物体移动\n        rig.applyForce(new Vec3(0,10,0));// 施加一个方向的里\n        rig.applyTorque(new Vec3(0,10,0));//  施加扭矩\n        rig.applyImpulse(new Vec3(0,10,0));// 施加冲量\n        rig.setLinearVelocity(new Vec3(0,10,0))// 设置线性速度\n\n        // 碰撞监听 触发监听\n        let coll = this.role.getComponent(CapsuleCollider)\n        coll.on(\"onCollisionStay\",(e)=>{},this)\n        coll.on('onTriggerStay', (e)=>{}, this);\n\n        // 如果是高速运动的物体防止碰撞穿透，刚体需要开启CCD,连续监测碰撞\n        rig.useCCD = true;\n\n\n        // 恒力组件，每帧给刚体给定的力 和扭矩\n        let con:ConstantForce = this.constantNode.getComponent(ConstantForce)\n        con.force = new Vec3(0,10,0);\n        con.localTorque = new Vec3(0,10,0);\n    }\n\n    // update (deltaTime: number) {\n    //     // [4]\n    // }\n}\n\n/**\n * [1] Class member could be defined like this.\n * [2] Use `property` decorator if your want the member to be serializable.\n * [3] Your initialization goes here.\n * [4] Your update function goes here.\n *\n * Learn more about scripting: https://docs.cocos.com/creator/3.3/manual/zh/scripting/\n * Learn more about CCClass: https://docs.cocos.com/creator/3.3/manual/zh/scripting/ccclass.html\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.3/manual/zh/scripting/life-cycle-callbacks.html\n */\n"]}